#jms相关知识点
## 概念
	Java Message Service是由Sun开发的，它为 Java程序提供一种访问企业消息系统的方法。
	JMS是一系列的接口及相关语义的集合，通过这些接口和和其中的方法，JMS客户端如何去访问消息系统，完成创建、发送、接收和读取企业消息系统中消息。 
## 存在的意义
1. 定义一组消息公用概念和实用工具。
	
	      所有Java应用程序都可以使用JMS中定义的API去完成消息的创建、接收与发送，任何实现了JMS标准的MOM都可以作为消息的中介，完成消息的存储转发。
2. 最大化消息应用程序的可移植性。

	      MOM提供了有保证的消息发送，应用程序开发人员无需了解远程过程调用（PRC）和网络/通信协议的细节，提供了程序的可移植性。
3. 最大化降低应用程序与应用系统之间的耦合度。

	      由于MOM的存在，各个应用程序只关心和MOM之间如何进行消息的接收与发送，而无需关注MOM的另一边，其他程序是如何接收和发送的。
## JMS提供了两种消息通信模型：

   1.  点到点（P2P）模型
   
	Ø  每条消息有一个消费者
		
		      每条只有一个消费者，如果一条消息被消息者接收，那么其他的消费者就不能得到这条消息了。
		
	Ø 发送和接受消息与时间没有关系
		
		      也就是说，生产者在发送消息后，消费者可以在任意的时刻接收，但有两个前提：
		
		            1、消息未过期
		
		            2、消息没有被其他的用户接收
		
		      消费者也可以先运行，当生产者一运行，将消息发送到队列中，消费者即可从队列中获得消息，这叫“守株待兔“。
		
	Ø  消费者必须确认对消息的接收
		
		      收到消息后消费者必须确认消息已被接收，否则JMS服务提供者会认为该消息没有被接收，那么这条消息仍然可以被其他人接收。程序可以自动进行确认，不需要人
			工干预。
		
	Ø  非持久的消息最多只发送一次
		
		      非持久的消息最多只发送一次，表示消息有可能未被发送，造成未被发送的原因可能有：
		
		            1、 JMS服务提供者出现宕机等情况，造成非持久信息的丢失
		
		            2、 队列中的消息过期，未被接收
		
	Ø  持久的消息严格发送一次
		
		      我们可以将比较重要的消息设置为持久化的消息，持久化后的消息不会因为JMS服务提供者的故障或者其他原因造成消息丢失。

   2.  发布/订阅（Pub/Sub）模型
	
	Ø  每个消息都可以有多个（0，1，……）订阅者
	
	      每条消息可以有多个消费者，如果报纸和杂志一样，谁订阅了谁都可以获得。
	
	Ø  订阅者只能消费他们订阅之后出版的消息
	
	      这就要求订阅者必须先订阅，生产者再发布。即订阅者必须先运行，再等待生产者的运行，这和点对点类型有所差异。
	
	Ø  订阅者必须保持为活动状态才能使用这些消息
	
	      即订阅者必须保持活动状态等待发布者发布的消息，如果订阅者在发布者发布消息之后才运行，则不能获得先前发布者发布的消息。


## JMS定义了五种不同的消息正文格式，以及调用的消息类型，允许你发送并接收以一些不同形式的数据，提供现有消息格式的一些级别的兼容性：

	· StreamMessage -- Java原始值的数据流
	· MapMessage--一套名称-值对
	· TextMessage--一个字符串对象
	· ObjectMessage--一个序列化的 Java对象
	· BytesMessage--一个未解释字节的数据流

## 提供者
ActiveMQ 

	是Apache出品，最流行的，能力强劲的开源消息总线。ActiveMQ 是一个完全支持JMS1.1和J2EE 1.4规范的 JMS Provider实现,尽管JMS规范出台已经是很久的事情了,
	但是JMS在当今的J2EE应用中间仍然扮演着特殊的地位。

	主要特点：
	
	1. 多种语言和协议编写客户端。语言: Java, C, C++, C#, Ruby, Perl, Python, PHP。应用协议: OpenWire,Stomp REST,WS Notification,XMPP,AMQP
	
	2. 完全支持JMS1.1和J2EE 1.4规范 (持久化,XA消息,事务)
	
	3. 对Spring的支持,ActiveMQ可以很容易内嵌到使用Spring的系统里面去,而且也支持Spring2.0的特性
	
	4. 通过了常见J2EE服务器(如 Geronimo,JBoss 4, GlassFish,WebLogic)的测试,其中通过JCA 1.5 resource adaptors的配置,可以让ActiveMQ可以自动的部署到
	任何兼容J2EE 1.4 商业服务器上
	
	5. 支持多种传送协议:in-VM,TCP,SSL,NIO,UDP,JGroups,JXTA
	
	6. 支持通过JDBC和journal提供高速的消息持久化
	
	7. 从设计上保证了高性能的集群,客户端-服务器,点对点
	
	8. 支持Ajax
	
	9. 支持与Axis的整合

	10. 可以很容易得调用内嵌JMS provider,进行测试

kafka是一种高吞吐量的分布式发布订阅消息系统，她有如下特性：

    通过O(1)的磁盘数据结构提供消息的持久化，这种结构对于即使数以TB的消息存储也能够保持长时间的稳定性能。

    高吞吐量：即使是非常普通的硬件kafka也可以支持每秒数十万的消息。

    支持通过kafka服务器和消费机集群来分区消息。

    支持Hadoop并行数据加载。


卡夫卡的目的是提供一个发布订阅解决方案，它可以处理消费者规模的网站中的所有动作流数据。 这种动作（网页浏览，搜索和其他用户的行动）是在现代网络上的许多社会功能的一个关键因素。 这些数据通常是由于吞吐量的要求而通过处理日志和日志聚合来解决。 对于像Hadoop的一样的日志数据和离线分析系统，但又要求实时处理的限制，这是一个可行的解决方案。kafka的目的是通过Hadoop的并行加载机制来统一线上和离线的消息处理，也是为了通过集群机来提供实时的消费。 